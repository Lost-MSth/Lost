# 公主与秽欲的献祭

姫と穢欲のサクリファイス  
Escu:de

## 类型

- 3.58GB
- SLG、ADV
- 架空世界、复仇类
- 至少4个结局

## 评价

游戏时间至少6小时（四个结局），有日文攻略

剧情是作为恶魔召唤的牺牲品的男主，从贫民窟里挑选出，被用于战争然后被抛弃，气坏了后报复国王的故事，报复的方式就是干公主（你看我解释的多么简单易懂清新脱俗

结局应该是四个，公主和神官一人两个，都是一个感化结局一个恶堕结局，至少两边的好结局是要过掉的不然剧情不完整，我认为最好的是神官的好结局，但还是矮子中拔高个，不太行

**以下吐槽可能涉及剧透**，可以跳到下个**加粗部分**

我感觉，编剧可能不懂什么是好结局，神官线好结局至少五恶魔都在，尽管不能实体化（要是男主和神官干上了岂不是只能干瞪眼笑死），公主线好结局就是五换一啊喂，公主已经调教好了谁还有兴趣啊（不是）

甚至，编剧也不知道什么是恶堕结局，神官线坏结局至少有堕落后的爽感，公主线呢，男主堕落是吧，当然可能他们就没想让我们看见公主恶堕后的样子，就直接变魔女开始莫名其妙黑暗生活了

要我说，至少应该有个结局是男主开后宫吧，反正公主和神官都是青梅，再加上五恶魔，七个人一起简直完美！顺手这个后宫结局也分个公主神官恶堕结局，和男主醒悟不复活魔女然后在公主身后实际掌权国家顺手开后宫的好结局，我觉得这样才是拔作该有的样子嘛~（这么看魔女真的是本作最惹人厌的了，六换一才能换出来，还性格扭曲了）

男主其实只是个没见过世面的一般人，所以我也没觉得人设有什么问题，本来复仇心就不会多坚固的，相比于死掉的兄弟们，让无辜的老百姓和贫民窟人们再受伤害并不是他所想看到的，至少我觉得这是合理的

当然如果剧情复仇坚持到底也没问题，男主没见识目光短浅道德败坏然后把全城坑死了是合理的，但那样的话，途中疯狂动摇的剧情设定就不太好了哦

不管怎么样，这不像拔作也不像正常作品是闹哪样啊，既没有恶堕后的描写不好冲，也没有纯爱后的描写不好冲，更是剧情怪怪的让人憋屈，非常不爽！

**剧透吐槽部分结束**，几个主要角色中，五恶魔其实相当不错，性格鲜明而且也没想干什么坏事；公主很有气质也蛮理性的；神官……太理想化了，真正的主角光环挂在身上的感觉，心里只有善意只会亚撒西，比那个一直在想原因的公主还离谱；另外的双胞胎和女仆安里就挺一般的了，没啥H事件，安里的心结好像到最后也没解开吧

请注意，最难走的就是神官好结局，需要的数值很高（反正5k多不够），记得在最后一次调教前存档，这样至少还可以改存档数值补救，当然攻略推荐二周目再走此结局

游戏难度不高（除神官好结局），纯数值游戏，分配方案人脑贪心就好

H事件主要分为公主调教中的动作和其它正常事件，可以说数量比较多，但公主的正常事件就一个，神官就两个！不是很让人满意，以及结局的后日谈里基本没有H事件了，这有点像是缺了一块一样，不好！画风很棒，玩法基本正常，主要都是调教类的，五恶魔还分别对应五种类型的玩法（就是因为画风和玩法入的坑），HCG静态，全语音（除男主），CV特别棒，极其富有感情，有音效

总的来说是比较值得一玩的作品，严格来说是正常ADV，却用了拔作设定，是我比较喜欢的风格，公主、神官、五恶魔都超级可爱！

## 破解

### 解包及源码

Escude社的引擎也太奇怪了点，为什么源码直接放在里面啊，然后每次先编译链接再运行，离大谱了

观察游戏结构，里面只有exe文件和bin文件，实际上bin是Escude特制压缩加密算法，Github上有EscudeEditor可解可编辑，GARbro可解（BIN/ESC-ARC）

源码放在`<游戏简称>.bin`里，游戏简称就是那个exe文件的名字，解出来发现是C源码，其它文件自己看吧，貌似脚本有二重加密，懒得管了

注意到`global.h`里面的`SYSTEMDATA`，这是很重要的结构：

```c
uchar  open_ev[512];
uchar  open_st[8192];
uchar  open_scene[128];
```

其中，`open_ev`是CG回想开关，`open_scene`是Scene回想开关

再注意到`global.c`里的`save_game_data`函数，里面有很重要的提示：

```c
crc = crc32(&save_data, sizeof(SAVEDATA));

get_save_path(file, num);
if(!(fp = fopen(file, "wb"))){
    gfree(cg);
    return -1;
}
fwrite(&save_data, sizeof(SAVEDATA), 1, fp);
fwrite(&crc, sizeof(crc), 1, fp);
fwrite(gi.pixel+(gi.height-1)*gi.pitch, FILE_PREVIEW_W*FILE_PREVIEW_H*2, 1, fp);
fclose(fp);
```

很明显的，存档文件由三部分构成，存档数据+CRC32校验码+存档预览图（按像素存储）

这两玩意对于后面的存档及回想的修改是很重要的

### 存档及全回想

#### 全回想开启

游戏数据文件夹在`C:/Users/<你的用户名>/Documents/ESCUDE/PrincessSacrifice`，也就是文档文件夹里面，游戏内设置和一些共通数据记录文件为`princess.sys`，存档文件为`*.dat`

文件相当的大，大部分都是空的，所以看看不空的就好，大概在第二个有大片非0数据的地方开始，那里就是回想开关了

数据块里FE可能是开始标志，按照我这边的16进制地址：

```plain
CG开关
0x2026D FE
0x2035B 3F
它们俩中间全填FF就好
```

```plain
Scene开关
0x2246D FE
0x22472 01 (这是最后一张的开关，写成FF也行)
它们俩中间填四个FF
```

如果地址对不上，那就要手动找了，注意CG和Scene开关中间隔着个`open_st[8192]`，数数就找到了

#### 存档修改

> 神官线数值不够的，可以在最后一次调教前改一下数值，我就这样干的

直接搜那个黑暗食量的数值就好了，注意是16进制的little endian格式，也就是倒过来

8个数值连在一起的，非常好找到，然后你会发现存档读不出来了，因为CRC32校验没改，按照上面的源码算一算就行了

比较坑的是，这个CRC32它计算的前后都没有反转，最后给上我写的算这个校验值的python代码作为参考：

```python
import crcmod

crc32_func = crcmod.mkCrcFun(0x104c11db7, rev=False, initCrc=0, xorOut=0xFFFFFFFF)

OFFSET = 0x09dc49

with open('tmp.dat', 'rb') as f:
    data = f.read()
    crc = crc32_func(data[:OFFSET]).to_bytes(4, byteorder='little')
    print(crc)

with open('tmp.dat', 'wb') as f:
    f.write(data[:OFFSET] + crc + data[OFFSET+4:])
```
